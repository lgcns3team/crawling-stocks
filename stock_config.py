import os

from dotenv import load_dotenv

load_dotenv()

# ================================
# KIS API 설정
# ================================
APP_KEY = os.getenv("KIS_APP_KEY")
APP_SECRET = os.getenv("KIS_APP_SECRET")

KIS_ENV = "real"

if KIS_ENV == "real":
    BASE_URL = "https://openapi.koreainvestment.com:9443"
    # 현재가 상세조회(ver2) TR (실전)
    TR_ID_PRICE = "FHPST01010000"
else:
    # 모의투자 서버 (이 TR은 모의 미지원이지만 구조만 유지)
    BASE_URL = "https://openapivts.koreainvestment.com:29443"
    TR_ID_PRICE = "FHPST01010000"

# ================================
# 수집 대상 종목 (Companies.id 와 동일해야 함)
# ================================
TARGET_TICKERS = [
    # 1. 반도체
    "005930",  # 삼성전자
    "000660",  # SK하이닉스
    "000990",  # DB하이텍
    "042700",  # 한미반도체
    "009150",  # 삼성전기
    "007660",  # 이수페타시스
    "058470",  # 리노공업
    "002380",  # KCC
    "039030",  # 이오테크닉스
    "240810",  # 원익IPS
    "403870",  # HPSP
    "353200",  # 대덕전자
    "030530",  # 원익홀딩스
    "095340",  # ISC
    "357780",  # 솔브레인
    "222800",  # 심텍
    "489790",  # 한화비전
    "098460",  # 고영
    "084370",  # 유진테크

    # 2. 모빌리티
    "005380",  # 현대차
    "000270",  # 기아
    "012330",  # 현대모비스
    "204320",  # HL만도
    "066570",  # LG전자
    "086280",  # 현대글로비스
    "047050",  # 포스코인터내셔널
    "161390",  # 한국타이어앤테크놀로지
    "002380",  # KCC
    "018880",  # 한온시스템
    "005850",  # 에스엘
    "011210",  # 현대위아
    "065350",  # 신성델타테크
    "073240",  # 금호타이어
    "003570",  # SNT다이내믹스
    "007340",  # DN오토모티브
    "437730",  # 삼현
    "120110",  # 코오롱인더
    "004490",  # 세방전지
    "064960",  # SNT모티브

    # 3. 2차전지
    "006400",  # 삼성SDI
    "373220",  # LG에너지솔루션
    "096770",  # SK이노베이션
    "003670",  # 포스코퓨처엠
    "247540",  # 에코프로비엠
    "086520",  # 에코프로
    "066970",  # 엘앤에프
    "450080",  # 에코프로머티
    "011790",  # SKC
    "011780",  # 금호석유화학
    "014680",  # 한솔케미칼
    "361610",  # SK아이이테크놀로지
    "357780",  # 솔브레인
    "457190",  # 이수스페셜티케미컬
    "020150",  # 롯데에너지머티리얼즈
    "065350",  # 신성델타테크
    "005070",  # 코스모신소재
    "178320",  # 서진시스템
    "348370",  # 엔켐
    "078600",  # 대주전자재료

    # 4. 재생에너지
    "112610",  # 씨에스윈드
    "009830",  # 한화솔루션
    "322000",  # HD현대에너지솔루션
    "100090",  # SK오션플랜트
    "336260",  # 두산퓨얼셀
    "010060",  # OCI홀딩스
    "178320",  # 서진시스템
    "078600",  # 대주전자재료
    "281740",  # 레이크머티리얼즈
    "417200",  # LS머트리얼즈
    "475150",  # SK이터닉스
    "044490",  # 태웅
    "119850",  # 지엔씨에너지
    "271940",  # 일진하이솔루스
    "161000",  # 애경케미칼
    "107640",  # 한중엔시에스
    "389260",  # 대명에너지
    "017860",  # DS단석
    "011930",  # 신성이엔지
    "086390",  # 유니테스트

    # 5. 원자력 에너지
    "034020",  # 두산에너빌리티
    "052690",  # 한국전력기술
    "298040",  # 효성중공업
    "015760",  # 한국전력
    "032820",  # 우리기술
    "457550",  # 우진
    "126720",  # 수산인더스트리
    "084110",  # 우진엔텍
    "036190",  # 금화피에스시
    "046120",  # 오르비텍
    "250060",  # 모비스
    "096350",  # 대창솔루션
    "006910",  # 보성파워텍
    "001440",  # 대한전선
    "047040",  # 대우건설
    "044490",  # 태웅
    "094820",  # 일진파워
    "100840",  # SNT에너지
    "388050",  # 지투파워
    "019990",  # 에너토크
]

# (로그용) 종목코드 -> 종목명
TICKER_TO_NAME = {
    "005930": "삼성전자",
    "000660": "SK하이닉스",
    "000990": "DB하이텍",
    "042700": "한미반도체",
    "009150": "삼성전기",
    "007660": "이수페타시스",
    "058470": "리노공업",
    "002380": "KCC",
    "039030": "이오테크닉스",
    "240810": "원익IPS",
    "403870": "HPSP",
    "353200": "대덕전자",
    "030530": "원익홀딩스",
    "095340": "ISC",
    "357780": "솔브레인",
    "222800": "심텍",
    "489790": "한화비전",
    "098460": "고영",
    "084370": "유진테크",

    "005380": "현대차",
    "000270": "기아",
    "012330": "현대모비스",
    "204320": "HL만도",
    "066570": "LG전자",
    "086280": "현대글로비스",
    "047050": "포스코인터내셔널",
    "161390": "한국타이어앤테크놀로지",
    "002380": "KCC",
    "018880": "한온시스템",
    "005850": "에스엘",
    "011210": "현대위아",
    "065350": "신성델타테크",
    "073240": "금호타이어",
    "003570": "SNT다이내믹스",
    "007340": "DN오토모티브",
    "437730": "삼현",
    "120110": "코오롱인더",
    "004490": "세방전지",
    "064960": "SNT모티브",

    "006400": "삼성SDI",
    "373220": "LG에너지솔루션",
    "096770": "SK이노베이션",
    "003670": "포스코퓨처엠",
    "247540": "에코프로비엠",
    "086520": "에코프로",
    "066970": "엘앤에프",
    "450080": "에코프로머티",
    "011790": "SKC",
    "011780": "금호석유화학",
    "014680": "한솔케미칼",
    "361610": "SK아이이테크놀로지",
    "357780": "솔브레인",
    "457190": "이수스페셜티케미컬",
    "020150": "롯데에너지머티리얼즈",
    "065350": "신성델타테크",
    "005070": "코스모신소재",
    "178320": "서진시스템",
    "348370": "엔켐",
    "078600": "대주전자재료",

    "112610": "씨에스윈드",
    "009830": "한화솔루션",
    "322000": "HD현대에너지솔루션",
    "100090": "SK오션플랜트",
    "336260": "두산퓨얼셀",
    "010060": "OCI홀딩스",
    "281740": "레이크머티리얼즈",
    "417200": "LS머트리얼즈",
    "475150": "SK이터닉스",
    "044490": "태웅",
    "119850": "지엔씨에너지",
    "271940": "일진하이솔루스",
    "161000": "애경케미칼",
    "107640": "한중엔시에스",
    "389260": "대명에너지",
    "017860": "DS단석",
    "011930": "신성이엔지",
    "086390": "유니테스트",

    "034020": "두산에너빌리티",
    "052690": "한국전력기술",
    "298040": "효성중공업",
    "015760": "한국전력",
    "032820": "우리기술",
    "457550": "우진",
    "126720": "수산인더스트리",
    "084110": "우진엔텍",
    "036190": "금화피에스시",
    "046120": "오르비텍",
    "250060": "모비스",
    "096350": "대창솔루션",
    "006910": "보성파워텍",
    "001440": "대한전선",
    "047040": "대우건설",
    "094820": "일진파워",
    "100840": "SNT에너지",
    "388050": "지투파워",
    "019990": "에너토크",
}

# 루프 설정
LOOP_INTERVAL_SEC = 60      # 1분마다
MAX_LOOPS = None            # 테스트용으로 숫자 넣으면 그 횟수만 실행

# ================================
# DB 설정
# ================================
DB_HOST = os.getenv("db_host")
DB_PORT = int(os.getenv("db_port"))
DB_USER = os.getenv("db_user")
DB_PASSWORD = os.getenv("db_password")
DB_NAME = os.getenv("db_name")

# 이 이름으로 테이블이 생성됨
PRICE_TABLE_NAME = "Stocks"     # 주가 스냅샷 테이블
COMPANY_TABLE_NAME = "Companies"  # 이미 만들어둔 종목 마스터
